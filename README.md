# NodeJS Momo Example

## Usage

### Step 1

- Clone this project
- Run `npm install`
- Create a `.env` file by copying `.env.example`. We shall be adding the `Primary Key`, `User ID` and `User Secret` for each product that we are subscribed to. In this case, `Collections` and `Disbursements`.

### Step 2

- Download and install [ngrok](https://ngrok.com).
- Extract it and run `./ngrok http 3000` in the same directory.
- Leave the terminal tab open as we shall use the NGROK URL generated for the next step.

### Step 3

- Open a new tab in the terminal
- We are going to generate the `User ID` and `User Secret` for each subscribed product on the MoMo sandbox using the ngrok url from the previous terminal and the primary key for each product.
- Run the command similar to this but specific to your instance.
- `npx momo-sandbox --host blahblah.ngrok.com --primary-key blah-blah-uu-id`
- Copy the `Primary Key`, `User ID` and `User Secret` for each product in the `.env` file created earlier.
- Run `npm run start` to start the application.

## Key Endpoints

<!-- This is a simple app where you can make a sale and 80% of each sale is disbursed to a merchant -->

- `GET /` -> Point of sale web page
- `GET /pay` -> initiates a payment
- `ANY /callback` -> receives callback from MTN

<!-- ## Running with the sandbox

- To test the sandbox locally, download [ngrok](https://ngrok.com). Once installed, extract it and run `./ngrok http 3000`. And leave the cli tab open
- Note the url generated by ngrok and generate a sandbox user with the url; `npx momo-sandbox --host blahblah.ngrok.com --primary-key blah-blah-uu-id`
- Note the user id and secret you receive and run the application with them;
- Do this for both collections and disbursement
- Run `npm run start` -->
