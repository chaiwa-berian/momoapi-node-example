# NodeJS Momo Example

## Usage

- Clone this project
- Run `npm install`
- Run `node .` to start the example application

## How it works

This is a simple app where you can make a sale and 80% of each sale is disbursed to a merchant

- `GET /` -> Point of sale web page
- `GET /pay` -> initiates a payment
- `ANY /callback` -> receives callback from mtn

## Running with the sandbox

- To test the sandbox locally, download [ngrok](https://ngrok.com). Once installed, extract it and run `./ngrok http 3000`. And leave the cli tab open
- Note the url generated by ngrok and generate a sandbox user with the url; `npx momo-sandbox --host blahblah.ngrok.com --primary-key blah-blah-uu-id`
- Note the user id and secret you receive and run the application with them;
- Do this for both collections and disbursement

```sh
COLLECTIONS_USER_SECRET="blah blah" COLLECTIONS_USER_ID="blah blah" PRIMARY_KEY="blah blah" node index.js
```
